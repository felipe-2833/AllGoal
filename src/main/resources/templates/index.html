<!DOCTYPE html>
<html lang="en" data-theme="cyberpunk"> <head>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
    <meta charset="UTF-8">
    <title>AllGoal</title>
</head>
<body>

<div class="drawer lg:drawer-open">
    <input id="my-drawer-3" type="checkbox" class="drawer-toggle" />

    <div class="drawer-content flex flex-col">

        <nav class="navbar bg-base-300 shadow-sm">
            <div class="flex-none lg:hidden">
                <label for="my-drawer-3" aria-label="open sidebar" class="btn btn-square btn-ghost">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block h-6 w-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </label>
            </div>

            <div class="flex-1">
                <a href="/meta/dashboard" class="btn btn-ghost text-xl">
                    <img th:src="@{/images/logo.png}" alt="logo" class="w-50 h-50" />
                </a>
            </div>
            <div class="flex-none">
                <ul class="menu menu-horizontal px-1">
                    <li>
                        <details>
                            <summary>üåé</summary>
                            <ul class="bg-base-100 rounded-t-none p-2 z-50">
                                <li><a href="?lang=pt_BR">üáßüá∑</a></li>
                                <li><a href="?lang=en_US">üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø</a></li>
                            </ul>
                        </details>
                    </li>
                </ul>
            </div>
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
                    <div class="w-10 rounded-full">
                        <img alt="avatar do usu√°rio" th:src="${user.avatarUrl}" />
                    </div>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-1 mt-3 w-52 p-2 shadow">
                    <li><a class="justify-between" th:text="${user.nome}"></a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
            </div>
        </nav>

        <div th:if="${message}" role="alert" class="alert alert-success alert-soft m-4">
            <span th:text="${message}"></span>
        </div>
        <main class="p-4 flex flex-col items-center">
            <div class="stats shadow">
                <div class="stat">
                    <div class="stat-figure text-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block h-8 w-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                    </div>
                    <div class="stat-title" th:text="#{level}"></div>
                    <div class="stat-value text-primary" th:text="${user.nivel}"></div>
                    <div class="stat-desc text-wrap" th:text="${xpRestante} + #{niveldesc}"></div>
                </div>

                <div class="stat">
                    <div class="stat-figure text-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block h-8 w-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    </div>
                    <div class="stat-title" th:text="#{xp}"></div>
                    <div class="stat-value text-secondary" th:text="${user.xpTotal}"></div>
                    <div class="stat-desc text-wrap" th:text="#{xpdesc}"></div>
                </div>

                <div class="stat">
                    <div class="stat-figure text-accent">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                        </svg>
                    </div>
                    <div class="stat-title" th:text="#{coins}"></div>
                    <div class="stat-value text-accent" th:text="${user.moedas}"></div>
                    <div class="stat-desc text-wrap" th:text="#{coinsdesc}"></div>
                </div>
                <div class="stat">
                    <div class="stat-figure text-info">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                        </svg>

                    </div>
                    <div class="stat-title" th:text="#{completedgoals}"></div>
                    <div class="stat-value text-info" th:text="${metasConcluidas}"></div>
                    <div class="stat-desc text-wrap" th:text="#{goalsdesc}"></div>
                </div>

                <div class="stat">
                    <div class="stat-figure text-warning">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
                        </svg>

                    </div>
                    <div class="stat-title"th:text="#{ranking}"></div>
                    <div class="stat-value text-warning" th:text="${ranking} + '¬∫'"></div>
                    <div class="stat-desc text-wrap" th:text="#{rankingdesc}"></div>
                </div>
            </div>

            <div class="hero bg-base-200 mt-8 rounded-lg max-w-4xl">
                <div class="hero-content flex-col lg:flex-row">
                    <img
                            th:src="@{/images/mascote.png}"
                            class="max-w-xs sm:max-w-sm rounded-full shadow-2xl"
                    />
                    <div class="max-w-md">
                        <h1 class="text-5xl font-bold" th:text="#{hi} + ' ' + ${user.nome}"></h1>
                        <p class="py-6" th:text="#{dashboardtext}"></p>
                    </div>
                </div>
            </div>
        </main>

        <div class="flex flex-col w-full my-8 px-8">

            <h2 class="text-3xl font-bold text-base-content text-opacity-60" th:text="#{goals}"></h2>

            <div class="divider"></div>
        </div>

        <main class=" p-4 flex flex-row flex-wrap justify-center gap-4">
            <div th:each="meta : ${metas}">

                <button class="card bg-base-300 w-96 rounded-xl text-left shadow-lg hover:shadow-2xl transition-all"
                        th:onclick="'document.getElementById(\'modal_' + ${meta.idMeta} + '\').showModal()'">

                    <div th:text="${meta.dataCriacao}" class="badge badge-accent m-4"></div>

                    <div class="card-body items-center">
                        <h2 th:text="${meta.titulo}" class="card-title"></h2>
                        <div class="card-actions justify-end">
                            <div class="badge badge-outline" th:text="${meta.xpRecompensa} + ' ' + #{xp}"></div>
                            <div class="badge badge-outline" th:text="${meta.moedasRecompensa} + ' ' + #{coins}"></div>
                        </div>
                    </div>
                </button>

                <dialog th:id="'modal_' + ${meta.idMeta}" class="modal">
                    <div class="modal-box w-11/12 max-w-2xl">

                        <form th:action="@{/meta/submeter}" method="post">

                            <h3 class="font-bold text-2xl" th:text="${meta.titulo}"></h3>
                            <p class="py-4" th:text="${meta.descricao}">...</p>
                            <div class="flex justify-start gap-2">
                                <div class="badge badge-outline" th:text="${meta.xpRecompensa} + ' ' + #{xp}"></div>
                                <div class="badge badge-outline" th:text="${meta.moedasRecompensa} + ' ' + #{coins}"></div>
                            </div>

                            <label class="form-control w-full mt-4">
                                <div class="label"><span class="label-text" th:text="#{justfy}"></span></div>
                                <textarea name="justificativa" class="textarea textarea-bordered font-normal h-24 w-full" th:placeholder="#{modalplaceholder}"></textarea>
                            </label>

                            <input type="hidden" name="metaId" th:value="${meta.idMeta}" />

                            <div class="modal-action">
                                <button type="submit" class="btn btn-primary" th:text="#{completegoal}"></button>
                            </div>
                        </form>

                        <form method="dialog">
                            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">‚úï</button>
                        </form>
                    </div>
                </dialog>
            </div>
        </main>

    </div>
    <div class="drawer-side">
        <label for="my-drawer-3" aria-label="close sidebar" class="drawer-overlay"></label>

        <ul class="menu bg-base-200 min-h-full w-64 p-4">
            <li><a href="/meta/dashboard">Dashboard</a></li>
            <li><a href="/meta">Minhas Metas</a></li>
            <li><a href="/loja">Loja</a></li>
            <li><a href="/ranking">Ranking</a></li>
        </ul>
    </div>
</div>

</body>
</html>